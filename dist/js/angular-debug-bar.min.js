!function(e,n,t,i){"use strict";var r=t.module("angular-debug-bar",[]);r.provider("debugBar",function(){var r=1e3,o=100,u={},a=e.performance||e.msPerformance||e.webkitPerformance||e.mozPerformance,l=["label","icon","unit"],s=function(){},c=function(e,n){for(var t=-1,i=n.length,r={};++t<i;){var o=n[t];o in e&&(r[o]=e[o])}return r},g=function(i){i.registerPlugin("watchCount",function(){var e=t.element(n.getElementsByTagName("html")),i=[],r=function(e){e.data().hasOwnProperty("$scope")&&t.forEach(e.data().$scope.$$watchers,function(e){i.push(e)}),t.forEach(e.children(),function(e){r(t.element(e))})};return 0===i.length&&r(e),i.length},{label:"Watchers",icon:"adb-icon-eye"}),i.registerPlugin("listenerCount",function(){var e=t.element(n.getElementsByTagName("html")),i=[],r=function(e){e.data().hasOwnProperty("$scope")&&t.forEach(e.data().$scope.$$listeners,function(e){i.push(e)}),t.forEach(e.children(),function(e){r(t.element(e))})};return 0===i.length&&r(e),i.length},{label:"Listeners",icon:"adb-icon-headphones"}),i.registerPlugin("DOMObjectCount",function(){return n.all.length},{label:"DOM objects",icon:"adb-icon-home"}),i.registerPlugin("loadTime",function(){return a.timing.loadEventStart-a.timing.navigationStart},{label:"Load time",unit:"ms"}),i.registerPlugin("latency",function(){return a.timing.responseStart-a.timing.connectStart},{label:"Latency",unit:"ms"}),i.registerPlugin("cssFilesCount",function(){return n.querySelectorAll('link[rel="stylesheet"]').length},{label:"CSS files"}),i.registerPlugin("jsFilesCount",function(){return n.querySelectorAll("script").length},{label:"JS files"}),i.registerPlugin("imagesCount",function(){return n.querySelectorAll("img").length},{label:"Images"}),i.registerPlugin("numberOfRequests",function(){return"getEntriesByType"in e.performance?e.performance.getEntriesByType("resource").length:"N/A"},{label:"Number of requests"})};t.extend(s.prototype,{extendedScope:i,settings:i,invokeFn:t.noop,setScope:function(e){Object.getPrototypeOf(this).extendedScope=e},getSettings:function(){return this.settings},run:function(){this.extendedScope[this.settings.name]=this.invokeFn()}}),this.clearDefaultPlugins=function(){u={}},this.setRefreshInterval=function(e){r=parseInt(e,10)||r},this.registerPlugin=function(e,n,i,r){if(!t.isString(e)&&""!==e)throw new Error('Plugin name: "'+e+'" is not valid string value!');if(u[e])throw new Error('Plugin "'+e+'" already exists!');if(!t.isFunction(n))throw new Error("Value function is required!");if(i&&!t.isObject(i))throw new Error("Settings is not an object!");i=i?c(i,l):{},t.extend(i,{name:e});var o=function(){};o.prototype=new s,t.extend(o.prototype,{settings:t.extend(t.copy(l),i),invokeFn:n}),u[e]=new o},g(this),this.$get=["$interval","$timeout",function(e,n){var i;return{getPlugins:function(){return t.copy(u)},run:function(){var a=function(){n(function(){t.forEach(u,function(e){e.run()})},i?0:o)};i?e.cancel(i):a(),i=e(a,r)}}}]}),r.directive("angularDebugBarPlugins",["$compile",function(e){var n=function(e){var n='<li><div class="value-wrapper">';return e.icon&&(n+='<i class="'+e.icon+'"></i>'),n+='<span class="value" ng-bind="'+e.name+'"></span>',e.unit&&(n+='<span class="unit">'+e.unit+"</span>"),n+="</div>",e.label&&(n+='<h3 class="label">'+e.label+"</h3>"),n+"</li>"};return{restrict:"E",replace:!0,scope:!1,template:"<ul></ul>",link:function(i,r){t.forEach(i.plugins,function(t){t.setScope(i),r.append(e(n(t.getSettings()))(i))})}}}]),r.directive("angularDebugBar",["$compile","debugBar",function(n,t){return{restrict:"E",replace:!0,scope:!0,controller:["$scope",function(n){var i=e.localStorage,r="adb.open",o=function(){return!!i};n.plugins={},n.show=o()?JSON.parse(i.getItem(r)):!1,n.show&&t.run(),n.showHide=function(e){e.preventDefault(),n.show=!n.show,o()&&i.setItem(r,n.show),n.show&&t.run()}}],compile:function(e){var i='<div id="angular-debug-bar" ng-class="{ \'show\': show }"><button class="adb-icon-cog" ng-click="showHide($event)"></button><angular-debug-bar-plugins></angular-debug-bar-plugins></div>';return function(r){r.plugins=t.getPlugins(),e.replaceWith(n(i)(r))}}}}])}(window,window.document,window.angular);